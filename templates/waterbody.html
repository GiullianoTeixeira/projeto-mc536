<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Waterbody Details</title>
    </head>
    <body>
        {% include 'header.html' %} 
        <h1>{{ waterbody.waterbody['nome'] }}</h1>

        {% if waterbody.user_type == 'pf' %}
            <button type="button">You are PF</button>
        {% elif waterbody.user_type == 'pj' %}
            <button type="button">You are PJ</button>
        {% endif %}

        <p>Coordinates: {{ waterbody.waterbody['coordenadas'] }}</p>
        <img src="{{ waterbody.waterbody['imagemUrl'] }}" alt="Image of {{ waterbody.waterbody['imagemUrl'] | default('waterbody') }}">

        <h2>Quantidade de Denúncias</h2>
        <p>Total de Denúncias: {{ waterbody.complaints|length }}</p>
        
        <h2>Denúncias</h2>
        <table>
            <thead>
                <tr>
                    <th>ID da Denúncia</th>
                    <th>Data e Hora</th>
                </tr>
            </thead>
            <tbody>
                {% for complaint in waterbody.complaints %}
                <tr>
                    <td><a href="/waterbody/{{ waterbody.waterbody['id'] }}/complaint/{{ complaint.id }}">{{ complaint.id }}</a></td>
                    <td><a href="/waterbody/{{ waterbody.waterbody['id'] }}/complaint/{{ complaint.id }}">{{ complaint.datahora }}</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <h2>Relatórios</h2>
        <p>Total de Relatórios: {{ waterbody.reports|length }}</p>
        
        <table>
            <thead>
                <tr>
                    <th>ID do Relatório</th>
                    <th>Data e Hora</th>
                </tr>
            </thead>
            <tbody>
                <p style="color: red;">Talvez essa informacao n deveria estar aqui</p>
                {% for report in waterbody.reports %}
                <tr>
                    <tr>
                        <td><a href="/waterbody/{{ waterbody.waterbody['id'] }}/report/{{ report.id }}">{{ report.id }}</a></td>
                        <td><a href="/waterbody/{{ waterbody.waterbody['id'] }}/report/{{ report.id }}">{{ report.datahora }}</a></td>
                    </tr>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h2>Média do Índice de Biodiversidade</h2>
        {% if waterbody.biodiversity_media_index %}
        <p>{{ waterbody.biodiversity_media_index['Nome do Corpo de Água'] }}: {{ waterbody.biodiversity_media_index['Média do Índice de Biodiversidade'] }}</p>
        {% else %}
        <p>Nenhum índice disponível.</p>
        {% endif %}

        <h2>Estatísticas de pH</h2>
        {% if waterbody.ph_stats %}
        <p>{{ waterbody.ph_stats['Nome do Corpo de Água'] }}: pH Mínimo: {{ waterbody.ph_stats['pH Mínimo'] }}, pH Médio: {{ waterbody.ph_stats['pH Médio'] }}, pH Máximo: {{ waterbody.ph_stats['pH Máximo'] }}</p>
        {% else %}
        <p>Nenhuma estatística de pH disponível.</p>
        {% endif %}
    </body>
</html>
